CREATE TABLE `resource_history_%d` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `resource_id` bigint(20) NOT NULL COMMENT '资源id',
  `tenant_id` int(11) DEFAULT '-1' COMMENT '租户id',
  `biz_type_id` int(11) DEFAULT '-1' COMMENT '业务id',
  `stage_id` int(11) DEFAULT '-1' COMMENT '阶段id',
  `type` int(11) DEFAULT '-1' COMMENT '操作类型',
  `sub_type` int(11) DEFAULT '-1' COMMENT '子操作类型',
  `subject` int(11) DEFAULT '-1' COMMENT '变更主体',
  `old_value` int(11) DEFAULT '-1' COMMENT '变更之前的值',
  `new_value` int(11) DEFAULT '-1' COMMENT '变更之后的值',
  `dp_old_value` int(11) DEFAULT '-1' COMMENT '变更之前的值（点评id）',
  `dp_new_value` int(11) DEFAULT '-1' COMMENT '变更之后的值（点评id）',
  `old_text` varchar(255) DEFAULT NULL COMMENT '变更之前的文本',
  `new_text` varchar(255) DEFAULT NULL COMMENT '变更之后的文本',
  `memo` varchar(512) DEFAULT NULL COMMENT '变更的原因或描述',
  `operator_id` int(11) DEFAULT '-1' COMMENT '变更操作人',
  `operator_user` varchar(11) DEFAULT '系统' COMMENT '变更操作人名',
  `operator_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '变更操作时间（客户端时间）',
  `source` int(11) DEFAULT '-1' COMMENT '变更来源',
  `subject_ext_info` varchar(512) DEFAULT NULL COMMENT '变更主体扩展信息',
  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `modify_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  PRIMARY KEY (`id`),
  KEY `IX_resource_id_tenant_id_biz_type_id_stage_id` (`resource_id`,`tenant_id`,`biz_type_id`,`stage_id`)
) ENGINE=InnoDB CHARSET=utf8 COMMENT='资源变更历史表';